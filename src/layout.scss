@import './_mixins.scss';

:root {
  // Updated by JavaScript when border is dragged
  --toc-width: 280px;
  --layout-divider-width: 4px;
}

html {
  margin: 0;
  padding: 0;
  overflow-y: auto;
}

body {
  margin: 0;
  padding: 0;
}

h1,
h2,
h3,
h4,
h5,
h6,
.alert,
a {
  scroll-margin-top: var(--header-collapsed-height);
}

body > .container {
  position: relative;
  padding: 0;
}

body.is-homepage {
  header {
    position: inherit;
    background: var(--bg2-color);
    &:hover {
      background: var(--bg2-color);
    }
  }

  .container {
    margin-top: 0;
  }
}

body.default main table {
  width: 100%;
}

@media (min-width: 1100px) {
  body.default main table {
    width: auto;
    min-width: 500px;
    margin: 1rem auto;
  }
}

body.default.toc-is-active nav.toc {
  background: var(--bg2-color);
  padding: var(--gap);
  border-radius: var(--border-radius);
}

body.default > .container {
  padding: var(--gap);

  .title-and-info {
    margin-top: var(--header-collapsed-height);
  }
}

body.default .title-and-info,
body.default nav.toc {
  margin-bottom: 2rem;
}

@media (min-width: 1100px) {
  body.default .title-and-info {
    margin-bottom: 0;
  }

  body.default > .container {
    width: 960px;
    margin: 0 auto;
  }

  body.default.toc-is-active > .container {
    display: grid;
    width: 100%;
    grid-template-columns: 1fr;
    grid-template-rows: 1fr;
    padding: 0;
    grid-template-columns: var(--toc-width) 1fr;
    grid-gap: var(--gap);

    nav.toc {
      background: none;
      border-radius: 0;
      grid-row: 1;
      grid-row-end: none;
      grid-column: 1;
      overflow-y: auto;
      scrollbar-color: var(--fg2-color) transparent;
      position: fixed;
      top: var(--header-collapsed-height);
      height: calc(100vh - var(--header-collapsed-height) - var(--gap));
      width: var(--toc-width);
      margin: var(--gap);
      padding: 0 var(--gap) 0 0;

      @media (prefers-reduced-motion: no-preference) {
        scroll-behavior: smooth;
      }

      border-right: var(--layout-divider-width) solid var(--bg2-color);
    }

    nav.toc.is-border-hovering {
      border-right-color: var(--fg2-color);
      cursor: col-resize;
    }

    nav.toc.is-resizing {
      border-right-color: var(--theme-color);
    }

    .title-and-info,
    main {
      margin-left: calc(var(--gap) + var(--layout-divider-width));
    }

    .title-and-info {
      padding: var(--gap);
      grid-row: 1;
      grid-column: 2;

      .info {
        border-bottom: var(--layout-divider-width) solid var(--bg2-color);
        padding-bottom: var(--gap);
      }
    }

    main {
      padding: var(--gap);
      grid-row: 2;
      grid-column: 2;

      background: linear-gradient(
        var(--bg-color) 0%,
        var(--bg-color) calc(100% - 250px),
        var(--bg2-color) 100%
      );
    }
  }
}

body.pdf .pdf-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

body.pdf .pdf-container .content {
  grid-column: 1 / 3;
}

body.pdf .container {
  padding: var(--header-collapsed-height) var(--gap) var(--gap) var(--gap);
}

@media (min-width: 1000px) {
  body.pdf .pdf-container {
    grid-template-columns: 1fr 80% 1fr;
    gap: 32px;
  }

  body.pdf .pdf-container .content {
    grid-row: 1;
    grid-column: 2;
  }

  body.pdf .pdf-container .prev {
    grid-row: 1;
    grid-column: 1;
  }

  body.pdf .pdf-container .next {
    grid-row: 1;
    grid-column: 3;
  }
}

body.search {
  .container {
    padding: 16px;
  }

  .beta-warning {
    text-align: center;
    font-size: var(--font-size-small);
    @include user-select(none);
  }

  .search-container {
    .results {
      min-height: 400px;
    }

    .search {
      height: 48px;
    }

    @media (min-width: 1000px) {
      & {
        margin: var(--header-collapsed-height) auto 0 auto;
        width: var(--main-width);
      }
    }
  }
}
